var jsonObject;function addMessage(e,s){var t="";"success"==s?t='<div class="alert alert-success alert-dismissible"><button type="button" class="close" data-dismiss="alert">&times;</button>'+e+"</div>":"error"==s?t='<div class="alert alert-danger alert-dismissible"><button type="button" class="close" data-dismiss="alert">&times;</button>'+e+"</div>":"info"==s&&(t='<div class="alert alert-info alert-dismissible"><button type="button" class="close" data-dismiss="alert">&times;</button>'+e+"</div>"),$("#messages").html(t)}function clearMessages(){$("#messages").html("")}function buildTreeMap(){addMessage("Valid JSON received. Please navigate to <strong>Graphic</strong> Viewer screen to explore json","info");var e=buildTree(jsonObject,!0,"JSON");$("#tree-chart").html(e),jsonObject={}}function buildTree(e,s,t){var a;return 1==s?(s=!1,a='<ul class="json-tree-root">'):a='<ul class="branch">',$.each(e,function(e,n){var l=typeof n,o=t+"."+e;a+="object"==l&&null!=n?'<li class="node"><span class="nodeElement tree-node-element-key" data-key-path="'+o+'">+ '+e+" {"+l+"}</span>"+buildTree(n,s,o)+"</li>":null==n?'<li class="node"><span class="tree-node-element-key" data-key-path="'+o+'">'+e+"</span> : null {"+l+"</li>":'<li class="node"><span class="tree-node-element-key" data-key-path="'+o+'">'+e+"</span> : "+htmlEntities(n)+" {"+l+"}</li>"}),a+="</ul>"}function htmlEntities(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}$("#json-url").keyup(function(){var e=$(this).val();addMessage("We are fetching data from url","info"),$.ajax({url:e,type:"GET",success:function(e){addMessage("Data fetched successfully","success");try{"string"==typeof e&&(e=JSON.parse(e)),jsonObject=e,$("#json-code").val(JSON.stringify(jsonObject)),buildTreeMap()}catch(e){addMessage("It seems your json is not valid:  <strong>"+e+"</strong>","info")}},error:function(e){addMessage("error",e)}})}),$("#json-code").keyup(function(){try{jsonObject=JSON.parse($(this).val()),buildTreeMap()}catch(e){addMessage("It seems your json is not valid:  <strong>"+e+"</strong>","error")}}),$("#clear-fields").click(function(){$("#json-url").val(""),$("#json-code").val("")}),$(document).on("click",".nodeElement",function(){$(this).siblings(".branch").toggleClass("active")}),$(document).on("click",".tree-node-element-key",function(){$("#json-tree-node-path").text($(this).attr("data-key-path"))});